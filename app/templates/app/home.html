{% extends "app/base.html" %}

{% block content %}
  <div class="container mt-4">
      <h2>ğŸ“Œ Danh sÃ¡ch bÃ i viáº¿t</h2>
      <a class="btn btn-primary mb-3" href="{% url 'create_post' %}">ğŸ“ ThÃªm bÃ i viáº¿t má»›i</a>
      
      {% if posts %}
        <ul class="list-group">
          {% for post in posts %}
            <li class="list-group-item">
              <h3>âœ… {{ post.title }}</h3>
              <p>âœ {{ post.content|truncatewords:20 }}</p>
              <small>ğŸ§‘â€ğŸ’» {{ post.author }} | ğŸ“… {{ post.created_at }}</small>
              
              <h5>ğŸ’¬ BÃ¬nh luáº­n:</h5>
              {% for comment in post.comments.all %}
                <p><strong>{{ comment.author.username }}:</strong> {{ comment.content }}</p>
              {% endfor %}
              
              {% if user.is_authenticated %}
                <form method="post" action="{% url 'add_comment' post.id %}">
                    {% csrf_token %}
                    {{ comment_form.as_p }}
                    <button type="submit" class="btn btn-secondary">ğŸ’¬ Gá»­i bÃ¬nh luáº­n</button>
                </form>
              {% else %}
                <p>âš  Báº¡n cáº§n <a href="{% url 'login' %}">Ä‘Äƒng nháº­p</a> Ä‘á»ƒ bÃ¬nh luáº­n.</p>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>âš  ChÆ°a cÃ³ bÃ i viáº¿t nÃ o.</p>
      {% endif %}
  </div>
{% endblock %}